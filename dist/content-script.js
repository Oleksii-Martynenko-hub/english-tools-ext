(()=>{"use strict";var e={887:(e,t,o)=>{o.d(t,{Z:()=>i});var r=o(933),n=o.n(r),a=o(476),s=o.n(a)()(n());s.push([e.id,'english-tools-content-script-root>div#english-tools-btn-add-open-form{font-weight:600;font-size:18px;color:#000;display:none;justify-content:center;align-items:center;width:46px;height:46px;border-radius:50%;border:2px solid #3030e2;background:#eee;position:absolute;z-index:1000;cursor:pointer}english-tools-content-script-root>div#english-tools-btn-add-open-form:hover{background:#dad9d9}english-tools-content-script-root>div#english-tools-btn-add-open-form.visible{display:flex}english-tools-content-script-root>div#english-tools-btn-add-open-form::after{content:"";display:none;margin:0;background:transparent;width:15%;height:15%;border-radius:50%;position:absolute;text-indent:-9999em;animation:load .8s infinite ease;box-shadow:10px 10px 0 0 rgba(0,0,0,.7)}english-tools-content-script-root>div#english-tools-btn-add-open-form.loading{color:transparent}english-tools-content-script-root>div#english-tools-btn-add-open-form.loading::after{display:block}english-tools-content-script-root>form#english-tools-form-add-card{padding:16px;font-size:16px;color:#000;display:none;width:300px;justify-content:space-between;flex-flow:wrap;border-radius:6px;border:1px solid #3030e2;background:#eee;position:absolute;z-index:1000}english-tools-content-script-root>form#english-tools-form-add-card.visible{display:flex}english-tools-content-script-root>form#english-tools-form-add-card>h3#form-title{font-size:20px;flex:0 0 100%;margin:0 0 16px 0;cursor:move}english-tools-content-script-root>form#english-tools-form-add-card>input{width:calc(50% - 8px);margin-bottom:16px;border-radius:6px;border:1px solid #d3d3d3;height:34px;padding:10px;outline:none}english-tools-content-script-root>form#english-tools-form-add-card>input:focus{border:1px solid #3030e2}english-tools-content-script-root>form#english-tools-form-add-card>div#form-loader{position:absolute;top:2px;right:2px;width:40px;height:40px}english-tools-content-script-root>form#english-tools-form-add-card>div#form-loader::after{content:"";display:none;background:transparent;width:6px;height:6px;border-radius:50%;position:absolute;left:calc(50% - 3px);top:calc(50% - 3px);animation:load .8s infinite ease;box-shadow:10px 10px 0 0 rgba(0,0,0,.7)}english-tools-content-script-root>form#english-tools-form-add-card>div#form-loader::before{content:"";display:none;background:#5bdd75;width:100%;height:100%;clip-path:polygon(33% 46%, 50% 68%, 86% 17%, 51% 87%, 20% 57%)}english-tools-content-script-root>form#english-tools-form-add-card.loading>button#btn-close{display:none}english-tools-content-script-root>form#english-tools-form-add-card.loading>div#form-loader::after{display:block}english-tools-content-script-root>form#english-tools-form-add-card.success>button#btn-close{display:none}english-tools-content-script-root>form#english-tools-form-add-card.success>div#form-loader::before{display:block}english-tools-content-script-root>form#english-tools-form-add-card>button#btn-submit{background:#5bdd75;cursor:pointer;flex:0 0 100%;border:none;outline:none;height:34px;border-radius:6px}english-tools-content-script-root>form#english-tools-form-add-card>button#btn-submit:hover{background:#4dbd63}english-tools-content-script-root>form#english-tools-form-add-card>button#btn-close{position:absolute;top:8px;right:8px;width:28px;height:28px;border-radius:50%;border:none;cursor:pointer;z-index:1}english-tools-content-script-root>form#english-tools-form-add-card>button#btn-close:hover{border:1px solid #d3d3d3}english-tools-content-script-root>form#english-tools-form-add-card>button#btn-close::after,english-tools-content-script-root>form#english-tools-form-add-card>button#btn-close::before{content:"";display:block;background:gray;width:2px;height:16px;border-radius:50%;position:absolute;left:calc(50% - 1px);top:calc(50% - 8px)}english-tools-content-script-root>form#english-tools-form-add-card>button#btn-close::before{transform:rotate(45deg)}english-tools-content-script-root>form#english-tools-form-add-card>button#btn-close::after{transform:rotate(-45deg)}@keyframes load{0%,100%{box-shadow:0em -0.7em 0em 0em rgba(0,0,0,.1),.5em -0.5em 0 0em rgba(0,0,0,.2),.7em 0em 0 0em rgba(0,0,0,.3),.5em .5em 0 0em rgba(0,0,0,.4),0em .7em 0 0em rgba(0,0,0,.5),-0.5em .5em 0 0em rgba(0,0,0,.6),-0.7em 0em 0 0em rgba(0,0,0,.7),-0.5em -0.5em 0 0em rgba(0,0,0,.8)}12.5%{box-shadow:0em -0.7em 0em 0em rgba(0,0,0,.8),.5em -0.5em 0 0em rgba(0,0,0,.1),.7em 0em 0 0em rgba(0,0,0,.2),.5em .5em 0 0em rgba(0,0,0,.3),0em .7em 0 0em rgba(0,0,0,.4),-0.5em .5em 0 0em rgba(0,0,0,.5),-0.7em 0em 0 0em rgba(0,0,0,.6),-0.5em -0.5em 0 0em rgba(0,0,0,.7)}25%{box-shadow:0em -0.7em 0em 0em rgba(0,0,0,.7),.5em -0.5em 0 0em rgba(0,0,0,.8),.7em 0em 0 0em rgba(0,0,0,.1),.5em .5em 0 0em rgba(0,0,0,.2),0em .7em 0 0em rgba(0,0,0,.3),-0.5em .5em 0 0em rgba(0,0,0,.4),-0.7em 0em 0 0em rgba(0,0,0,.5),-0.5em -0.5em 0 0em rgba(0,0,0,.6)}37.5%{box-shadow:0em -0.7em 0em 0em rgba(0,0,0,.6),.5em -0.5em 0 0em rgba(0,0,0,.7),.7em 0em 0 0em rgba(0,0,0,.8),.5em .5em 0 0em rgba(0,0,0,.1),0em .7em 0 0em rgba(0,0,0,.2),-0.5em .5em 0 0em rgba(0,0,0,.3),-0.7em 0em 0 0em rgba(0,0,0,.4),-0.5em -0.5em 0 0em rgba(0,0,0,.5)}50%{box-shadow:0em -0.7em 0em 0em rgba(0,0,0,.5),.5em -0.5em 0 0em rgba(0,0,0,.6),.7em 0em 0 0em rgba(0,0,0,.7),.5em .5em 0 0em rgba(0,0,0,.8),0em .7em 0 0em rgba(0,0,0,.1),-0.5em .5em 0 0em rgba(0,0,0,.2),-0.7em 0em 0 0em rgba(0,0,0,.3),-0.5em -0.5em 0 0em rgba(0,0,0,.4)}62.5%{box-shadow:0em -0.7em 0em 0em rgba(0,0,0,.4),.5em -0.5em 0 0em rgba(0,0,0,.5),.7em 0em 0 0em rgba(0,0,0,.6),.5em .5em 0 0em rgba(0,0,0,.7),0em .7em 0 0em rgba(0,0,0,.8),-0.5em .5em 0 0em rgba(0,0,0,.1),-0.7em 0em 0 0em rgba(0,0,0,.2),-0.5em -0.5em 0 0em rgba(0,0,0,.3)}75%{box-shadow:0em -0.7em 0em 0em rgba(0,0,0,.3),.5em -0.5em 0 0em rgba(0,0,0,.4),.7em 0em 0 0em rgba(0,0,0,.5),.5em .5em 0 0em rgba(0,0,0,.6),0em .7em 0 0em rgba(0,0,0,.7),-0.5em .5em 0 0em rgba(0,0,0,.8),-0.7em 0em 0 0em rgba(0,0,0,.1),-0.5em -0.5em 0 0em rgba(0,0,0,.2)}87.5%{box-shadow:0em -0.7em 0em 0em rgba(0,0,0,.2),.5em -0.5em 0 0em rgba(0,0,0,.3),.7em 0em 0 0em rgba(0,0,0,.4),.5em .5em 0 0em rgba(0,0,0,.5),0em .7em 0 0em rgba(0,0,0,.6),-0.5em .5em 0 0em rgba(0,0,0,.7),-0.7em 0em 0 0em rgba(0,0,0,.8),-0.5em -0.5em 0 0em rgba(0,0,0,.1)}}',""]);const i=s},476:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o="",r=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),r&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),r&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o})).join("")},t.i=function(e,o,r,n,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var i=0;i<this.length;i++){var d=this[i][0];null!=d&&(s[d]=!0)}for(var l=0;l<e.length;l++){var m=[].concat(e[l]);r&&s[m[0]]||(void 0!==a&&(void 0===m[5]||(m[1]="@layer".concat(m[5].length>0?" ".concat(m[5]):""," {").concat(m[1],"}")),m[5]=a),o&&(m[2]?(m[1]="@media ".concat(m[2]," {").concat(m[1],"}"),m[2]=o):m[2]=o),n&&(m[4]?(m[1]="@supports (".concat(m[4],") {").concat(m[1],"}"),m[4]=n):m[4]="".concat(n)),t.push(m))}},t}},933:e=>{e.exports=function(e){return e[1]}},654:(e,t,o)=>{o.r(t),o.d(t,{default:()=>h});var r=o(892),n=o.n(r),a=o(760),s=o.n(a),i=o(311),d=o.n(i),l=o(192),m=o.n(l),c=o(60),p=o.n(c),u=o(865),g=o.n(u),f=o(887),b={};b.styleTagTransform=g(),b.setAttributes=m(),b.insert=d().bind(null,"head"),b.domAPI=s(),b.insertStyleElement=p(),n()(f.Z,b);const h=f.Z&&f.Z.locals?f.Z.locals:void 0},892:e=>{var t=[];function o(e){for(var o=-1,r=0;r<t.length;r++)if(t[r].identifier===e){o=r;break}return o}function r(e,r){for(var a={},s=[],i=0;i<e.length;i++){var d=e[i],l=r.base?d[0]+r.base:d[0],m=a[l]||0,c="".concat(l," ").concat(m);a[l]=m+1;var p=o(c),u={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)t[p].references++,t[p].updater(u);else{var g=n(u,r);r.byIndex=i,t.splice(i,0,{identifier:c,updater:g,references:1})}s.push(c)}return s}function n(e,t){var o=t.domAPI(t);return o.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;o.update(e=t)}else o.remove()}}e.exports=function(e,n){var a=r(e=e||[],n=n||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var i=o(a[s]);t[i].references--}for(var d=r(e,n),l=0;l<a.length;l++){var m=o(a[l]);0===t[m].references&&(t[m].updater(),t.splice(m,1))}a=d}}},311:e=>{var t={};e.exports=function(e,o){var r=function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(o)}},60:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},192:(e,t,o)=>{e.exports=function(e){var t=o.nc;t&&e.setAttribute("nonce",t)}},760:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(o){!function(e,t,o){var r="";o.supports&&(r+="@supports (".concat(o.supports,") {")),o.media&&(r+="@media ".concat(o.media," {"));var n=void 0!==o.layer;n&&(r+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),r+=o.css,n&&(r+="}"),o.media&&(r+="}"),o.supports&&(r+="}");var a=o.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,o)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},865:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},473:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),a=o(560),s=r(o(757));o(654),console.log("from page"),s.default.root;var i=s.default.btn,d=s.default.form,l=s.default.inputWord,m=s.default.inputTranslate,c=s.default.formBtn,p=s.default.formCloseBtn,u=s.default.formTitle,g=chrome.runtime.connect({name:a.secretKey});g.onMessage.addListener((function(e,t){var o=e.msg,r=e.data;"word successfully translated"===o&&r.translate&&(l.value=f,m.value=r.translate.translate,d.classList.add("visible"),i.classList.remove("visible"),i.classList.remove("loading"),d.style.left=x.x+"px",d.style.top=x.y+"px"),"card successfully added"===o&&r.card&&(d.classList.add("success"),d.classList.remove("loading"),setTimeout((function(){d.classList.remove("visible"),d.classList.remove("success"),h=!1}),1e3))}));var f="",b=!1,h=!1,v={x:0,y:{start:0,end:0}},x={x:0,y:0},y={start:{x:0,y:0},end:{x:0,y:0}};document.addEventListener("mousedown",(function(e){e.target===u&&(y.start={x:e.pageX,y:e.pageY},document.addEventListener("mousemove",L)),b||(v.y.start=e.pageY),E(e)})),document.addEventListener("mouseup",(function(e){if(e.target===u&&document.removeEventListener("mousemove",L),!b){v.y.end=e.pageY,v.x=e.pageX;var t=(0,n.getSelectedText)();!t||1!==t.split(" ").filter((function(e){return e})).length||f||h||(f=t,b=!0,i.classList.add("visible"),i.style.left=v.x+"px",i.style.top=(v.y.end>=v.y.start?v.y.end+10:v.y.end-60)+"px",i.addEventListener("click",w))}})),c.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),d.classList.add("loading"),g.postMessage({msg:"event submit card",data:{card:{word:l.value,translate:m.value}}})})),p.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),d.classList.remove("visible"),h=!1}));var w=function(e){g.postMessage({msg:"event selected word",data:{word:f}}),h=!0,x.x=v.x+46,x.y=v.y.end>=v.y.start?v.y.end+10:v.y.end-60,i.classList.add("loading"),E(e)},L=function(e){d.style.left=x.x+(e.pageX-y.start.x)+"px",d.style.top=x.y+(e.pageY-y.start.y)+"px"},E=function(e){if(e.target!==i&&b)return i.removeEventListener("click",w),f="",b=!1,void i.classList.remove("visible")}},757:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=document.createElement("english-tools-content-script-root");document.body.appendChild(o);var r=document.createElement("form");r.id="english-tools-form-add-card",o.appendChild(r);var n=document.createElement("h3");n.id="form-title",n.innerHTML="Add new card",r.appendChild(n);var a=document.createElement("input");a.id="input-word",r.appendChild(a);var s=document.createElement("input");s.id="input-translate",r.appendChild(s);var i=document.createElement("button");i.id="btn-submit",i.innerText="Submit",r.appendChild(i);var d=document.createElement("button");d.id="btn-close",r.appendChild(d);var l=document.createElement("div");l.id="form-loader",r.appendChild(l);var m=document.createElement("div");m.id="english-tools-btn-add-open-form",m.innerText="ET",o.appendChild(m),t.default={root:o,btn:m,form:r,inputWord:a,inputTranslate:s,formBtn:i,formCloseBtn:d,formTitle:n}},0:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedText=void 0,t.getSelectedText=function(){if(window.getSelection){var e=window.getSelection();return(null==e?void 0:e.toString())||""}return""}},560:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.messageListener=t.secretKey=void 0,t.secretKey="alsdfkjl3jf9sd3h03ru3fs90e8u3fhsdifj",t.messageListener=function(e,o,r){chrome.runtime.onMessage.addListener((function(n,a,s){if(n.secret===t.secretKey&&n.msg===e){if(o(n.data,s,a),!r)return;return!0}}))}}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={id:r,exports:{}};return e[r].call(a.exports,a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(473)})();